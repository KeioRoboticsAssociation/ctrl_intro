[ホームに戻る](./C_index_cppplus.md)
←[前のページへ](./C00_func_proto.md)|[次のページへ](./C02_func_overload.md)→

# 関数のデフォルト引数

この記事では、関数のデフォルト引数について紹介します。
関数の引数にデフォルト値を設定しておくことで、引数を必要に応じて省略したりすることができます。

## 使いどころ

デフォルト引数は、**時々使いたいけど常には要らない数値**を関数に渡したい時に便利です。
具体例として、ロボットを移動させる関数を考えてみましょう。ロボットの二次元移動は x 方向、y 方向、回転の三つがあるので、以下のような実装になるはずです。ロボットを移動させながら回転させる場合、各足回りモーターへの指令値は、x 方向、y 方向、回転の 3 変数関数なので、

```cpp
void move_to(float x, float y, float angle){
    // ロボットを(x,y)へ移動し、かつangleだけ回転させる関数
    // 諸々の実装
}

int main(){
    move_to(2,3,0);
    return 0;
}
```

しかし、もしロボコンのルール上**ロボットをほとんど回転させながら移動する場面が少ない場合、３つ目の引数に毎回 0 を書くのは非常に面倒くさい**と思います。かと言って、回転がある場合とない場合で２通りの関数を用意するのもちょっと微妙です。こんな時に役立つのが**デフォルト引数**です。デフォルト引数は、**呼び出し時にその引数を省略することで、自動的にデフォルト値が代入される仕組みです。**

## デフォルト引数の書き方

では実際に先程の例でデフォルト引数を使う方法を紹介します。以下のコードを見てください。

```cpp
void move_to(float x, float y, float angle = 0.0){
    // ロボットを(x,y)へ移動し、かつangleだけ回転させる関数
    // 諸々の実装
}

int main(){
    move_to(2,3);//こう書くと回転しない
    move_to(2,3,90);//こう書くと回転する
    move_to(2,3,0);//こう書いてもエラーにはならないが、デフォルト値を設定した意味がなくない
    return 0;
}
```

上記のコードでは３つ目の引数 angle にデフォルト値 0.0 が設定されています。これにより、引数２つで関数を呼び出すと自動的に angle に 0.0 が代入されるようになります。角度を指定したくなったら通常通り３つの引数に数字を代入すれば OK です。

## 注意点

デフォルト引数にはいくつかの注意点があるので、まとめておきます。

### 1.デフォルト引数の位置

**デフォルト引数は、デフォルト値を設定しない引数よりも右側に書かれている必要があります。**
デフォルト引数が複数ある場合も同様です。

```cpp
void func1(int arg1=0,int arg2);//エラーになる
void func2(int arg1,int arg2=0,int arg3);//これもエラーになる
void func3(int arg1,int arg2,int arg3=0);//これはOK
void func4(int arg1,int arg2=0,int arg3=0);//これもOK

```

### 2.デフォルト引数が複数ある時

デフォルト引数が複数ある時、呼び出しの際に注意があります。それは、**デフォルト値を使用しない引数より左側にあるデフォルト引数は省略できない**ということです。例で見てみましょう。

```cpp
int func(int a, int b = 0, int c = 0){
    return a + b + c;
}

int main(){
    cout<<func(2)<<endl;//(a,b,c)=(2,0,0)が代入される
    cout<<func(2,3)<<endl;//(a,b,c)=(2,3,0)が代入される（cには代入されない）
    cout<<func(2,3,5)<<endl;//(a,b,c)=(2,3,5)が代入される
    cout<<func(2,,5)<<endl;//エラーになる
    cout<<func(2,0,5)<<endl;//cにデフォルト値以外を代入する場合、bは省略できない
    return 0;
}
```

この例では、引数bとcにデフォルト値0が指定されています。引数cのみデフォルト値以外を使いたい場合、引数bにはちゃんとデフォルト値を代入する必要があります。

### 3.プロトタイプ宣言

←[前のページへ](./C00_func_proto.md)|[次のページへ](./C02_func_overload.md)→
[ホームに戻る](./C_index_cppplus.md)
