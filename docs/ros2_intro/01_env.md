# 00:環境構築　<ROS2 入門>

本記事では、ROS2 の環境構築を行います。まずは Ubuntu を導入するところから始めましょう。

## Ubuntu の導入

Ubuntu とは、Linux を母体とした、OS(Operating System)の一つです（Windows とか iOS みたいなやつ）。
ROS2 は Ubuntu 環境でよく動作するので、まず Ubuntu を導入しましょう。
筆者は Mac を使ったことがないので、だれか詳しい人書いてください。
Ubuntu を利用する方法として、

1. WSL2 を使うやり方
2. デュアルブートにするやり方
   を紹介しますが、両者には以下のようなメリット/デメリットがあります。

| やり方           | いいところ               | だめなところ                                                 |
| ---------------- | ------------------------ | ------------------------------------------------------------ |
| wsl              | かんたんにできる         | wsl-マイコン間通信が現状できていない(ロボットに搭載できない) |
| 　デュアルブート | マイコン間通信がかんたん | windows とメモリを分けて使うため容量がへる                   |

## ROS2 のインストール

[公式ドキュメント](https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debians.html)に書いてあることを上から順にやりましょう。
公式ドキュメントは英語なので、苦手な人は deepL とかチャット GPT とか英語得意な人の助けを借りてください

## 環境設定

基本的には[公式ドキュメント](https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Configuring-ROS2-Environment.html)通りで OK です。<br>
**ドメイン ID**周りはのちのちエラーの原因になるので、ドキュメントとは異なる設定をします。

### ドメイン ID の設定

ホームディレクトリにある".bashrc"というファイルを開きます。デフォルトでは多分隠しファイルになっているので、隠しファイルを表示させるようにしてみてください。<br>
Ubuntu の Files アプリの右上にある漢字の「三」みたいなボタンを押すと、"Show Hidden Files"というチェックボックスがあると思うので、ここにチェックマークを入れれば OK です。<br>

.bashrc を開いたら、下の方に以下のスクリプトをコピペして、保存して閉じましょう。

```.bashrc
ID=0 # ここに自分固有の番号を入れる．分からなければ 0 とし，ROS_LOCALHOST_ONLY を使うようにしておく．
if [ $ID -eq 0 ]; then
export ROS_LOCALHOST_ONLY=1
else
export ROS_DOMAIN_ID=$ID
fi
```

### ドメイン ID とは

ROS には素晴らしい(~~余計なお世話の~~)機能があり、同一ネットワーク上で複数端末からノードを構成させることができます。これによってあるノードは端末 A で立ち上げて、あるノードは端末 B で立ち上げて、両ノード間で通信させたりすることも可能です。<br>
しかし、この機能のせいで意図せずプログラムが融合してしまい、意味不明な挙動が起こってしまうことがあります。
これを解消するのが**ドメイン ID**です。かんたんに言えば、**ドメイン ID が同じもの同士のみノードを共有します**。
